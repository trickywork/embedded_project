# 快速开始指南

## 当前状态

✅ **电脑端测试已就绪** - 可以在不连接硬件的情况下测试所有算法

## 立即开始测试

### 1. 运行测试程序

```bash
cd /Users/junliu/Downloads/embedded
pio run -e native -t exec
```

### 2. 查看测试结果

测试程序会自动运行4个测试场景：
- 正常数据测试
- 震颤检测（4Hz）
- 运动障碍检测（6Hz）
- 冻结步态检测

### 3. 重新编译（如果修改了代码）

```bash
pio run -e native
```

## 连接板子后的步骤

### 步骤1：连接开发板

1. 用USB线连接STM32 L475VG IoT Discovery板
2. 确认系统识别设备

### 步骤2：实现硬件驱动

需要实现以下函数：

**SensorManager.cpp**
```cpp
#ifdef MBED_OS
void SensorManager::initHardware() {
    // TODO: 初始化I2C和LSM6DSL传感器
}

SensorData SensorManager::read() {
    // TODO: 读取传感器数据
}
#endif
```

**BLEManager.cpp**
```cpp
#ifdef MBED_OS
bool BLEManager::begin() {
    // TODO: 初始化BLE
    // TODO: 创建服务和特征值
}
#endif
```

### 步骤3：编译和上传

```bash
# 编译
pio run -e disco_l475vg_iot01a

# 上传
pio run -e disco_l475vg_iot01a -t upload

# 查看输出
pio device monitor
```

## 常用命令速查

| 操作 | 命令 |
|------|------|
| 测试编译 | `pio run -e native` |
| 运行测试 | `pio run -e native -t exec` |
| 硬件编译 | `pio run -e disco_l475vg_iot01a` |
| 上传程序 | `pio run -e disco_l475vg_iot01a -t upload` |
| 串口监控 | `pio device monitor` |
| 清理构建 | `pio run -e native -t clean` |

## 项目文件说明

- `src/main.cpp` - 硬件主程序（连接板子后使用）
- `src/main_test.cpp` - 测试主程序（电脑端测试）
- `src/SymptomDetector.*` - 症状检测算法（已优化）
- `src/FFTProcessor.*` - FFT频率分析
- `src/SensorManager.*` - 传感器管理（支持模拟模式）
- `src/BLEManager.*` - BLE通信管理

## 当前测试结果

✅ **震颤检测** - 可以成功检测4Hz信号
✅ **运动障碍检测** - 可以成功检测6Hz信号
⚠️ **冻结步态检测** - 需要进一步优化
⚠️ **误报控制** - 正常数据仍有少量误报，可继续调整

## 需要帮助？

- 查看 `优化总结.md` 了解详细优化内容
- 查看 `README.md` 了解项目整体结构
- 查看 `VSCode使用指南.md` 了解如何在VSCode中使用

